"use strict";(self.webpackChunklaikostar_seller=self.webpackChunklaikostar_seller||[]).push([[103],{8103:function(t,e,a){a.r(e);var r=a(2791),s=a(1889),n=a(890),o=a(3239),c=a(9281),i=a(5527),l=a(9836),d=a(6890),p=a(5855),h=a(3994),u=a(3382),m=a(4554),Z=a(2903),j=a(1527),x=a(184);e.default=()=>{const{username:t}=(0,j.a)(),[e,a]=(0,r.useState)([]),[f,g]=(0,r.useState)(!0),[y,k]=(0,r.useState)("");(0,r.useEffect)((()=>{(async()=>{try{const[e,r,s,n,o,c,i,l]=await Promise.all([Z.Z.get(`http://localhost:8001/api/withdrawals/${t}`),Z.Z.get(`http://localhost:8001/api/training-bonus/${t}`),Z.Z.get(`http://localhost:8001/api/approvals/approve/${t}`),Z.Z.get(`http://localhost:8001/api/approvals/reject/${t}`),Z.Z.get(`http://localhost:8001/api/referral-payment/${t}`),Z.Z.get(`http://localhost:8001/api/approvals/referral/approve/${t}`),Z.Z.get(`http://localhost:8001/api/approvals/referral/reject/${t}`),Z.Z.get(`http://localhost:8001/api/task-transactions/${t}`)]),d=[...e.data.map((t=>({...t,type:"Withdrawal"}))),...r.data.map((t=>({...t,type:"Pending Training Bonus",status:"pending"}))),...s.data.map((t=>({...t,type:"Approved Training Bonus",status:"approved"}))),...n.data.map((t=>({...t,type:"Rejected Training Bonus",status:"rejected"}))),...o.data.map((t=>({...t,type:"Referral Payment Verification",status:t.status,amount:t.transactionAmount,accountNumber:"-",gateway:t.gateway,remarks:"Referral payment verification submitted"}))),...c.data.map((t=>({...t,type:"Approved Referral Payment",status:"approved"}))),...i.data.map((t=>({...t,type:"Rejected Referral Payment",status:"rejected",remarks:t.feedback||"No feedback provided"}))),...l.data.map((t=>({...t,type:"Task Transaction",status:t.status,amount:t.amount,taskName:t.taskId.name,accountNumber:"-",gateway:"-",remarks:t.description})))];d.sort(((t,e)=>new Date(e.createdAt)-new Date(t.createdAt))),a(d),g(!1)}catch(y){console.error("Error fetching transaction history:",y),k("Error fetching transaction history. Please try again."),g(!1)}})()}),[t]);const v=t=>{switch(t){case"approved":return{backgroundColor:"#d4edda",color:"#155724"};case"rejected":return{backgroundColor:"#f8d7da",color:"#721c24"};case"pending":return{backgroundColor:"#fff3cd",color:"#856404"};default:return{backgroundColor:"#ffffff",color:"#000000"}}};return(0,x.jsxs)(s.ZP,{container:!0,spacing:3,justifyContent:"center",children:[(0,x.jsx)(s.ZP,{item:!0,xs:12,children:(0,x.jsx)(n.Z,{variant:"h3",gutterBottom:!0,sx:{color:"secondary.main",textAlign:"center"},children:"Transaction History"})}),(0,x.jsx)(s.ZP,{item:!0,xs:12,sm:8,children:f?(0,x.jsx)(o.Z,{}):y?(0,x.jsx)(n.Z,{color:"error",variant:"h6",children:y}):0===e.length?(0,x.jsx)(n.Z,{variant:"h6",children:"No transactions found."}):(0,x.jsx)(c.Z,{component:i.Z,children:(0,x.jsxs)(l.Z,{children:[(0,x.jsx)(d.Z,{children:(0,x.jsxs)(p.Z,{children:[(0,x.jsx)(h.Z,{children:"Date"}),(0,x.jsx)(h.Z,{children:"Type"}),(0,x.jsx)(h.Z,{children:"Amount"}),(0,x.jsx)(h.Z,{children:"Status"}),(0,x.jsx)(h.Z,{children:"Account Number"}),(0,x.jsx)(h.Z,{children:"Gateway"}),(0,x.jsx)(h.Z,{children:"Remarks"})]})}),(0,x.jsx)(u.Z,{children:e.map((t=>(0,x.jsxs)(p.Z,{children:[(0,x.jsx)(h.Z,{children:new Date(t.createdAt).toLocaleDateString()}),(0,x.jsx)(h.Z,{children:t.type}),(0,x.jsxs)(h.Z,{children:["Rs ",t.amount]}),(0,x.jsx)(h.Z,{children:(0,x.jsx)(m.Z,{sx:{...v(t.status),padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:t.status})}),(0,x.jsx)(h.Z,{children:t.accountNumber||"-"}),(0,x.jsx)(h.Z,{children:t.gateway||"-"}),(0,x.jsx)(h.Z,{children:t.remarks||"-"})]},t._id)))})]})})})]})}}}]);
//# sourceMappingURL=103.7621df23.chunk.js.map
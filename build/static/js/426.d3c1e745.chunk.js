"use strict";(self.webpackChunklaikostar_seller=self.webpackChunklaikostar_seller||[]).push([[426],{426:function(e,t,a){a.r(t);var i=a(2791),n=a(1889),l=a(890),r=a(5527),s=a(4554),o=a(4294),c=a(7391),d=a(8096),u=a(4925),h=a(7198),x=a(3786),m=a(5289),g=a(5661),w=a(9157),p=a(1691),j=a(7123),y=a(1527),v=a(2903),b=a(5488),f=a(1140),Z=a(184);t.default=()=>{const{username:e}=(0,y.a)(),t=(0,b.s0)(),[a,k]=(0,i.useState)(""),[C,W]=(0,i.useState)(""),[S,A]=(0,i.useState)([]),[T,q]=(0,i.useState)(""),[E,_]=(0,i.useState)(""),[B,N]=(0,i.useState)(""),[P,I]=(0,i.useState)(!1),[L,D]=(0,i.useState)(null),[M,R]=(0,i.useState)(!1);(0,i.useEffect)((()=>{(async()=>{try{const t=await v.Z.get(`http://localhost:8001/api/user-accounts/${e}`);A(t.data)}catch(t){console.error("Error fetching wallets:",t)}})()}),[e]);const $=()=>{I(!1)},z=()=>{t("/wallet/add")};return(0,Z.jsxs)(n.ZP,{container:!0,spacing:3,justifyContent:"center",children:[(0,Z.jsx)(n.ZP,{item:!0,xs:12,children:(0,Z.jsx)(l.Z,{variant:"h3",gutterBottom:!0,sx:{color:"secondary.main",textAlign:"center"},children:"Withdraw Balance"})}),(0,Z.jsx)(n.ZP,{item:!0,xs:12,sm:6,children:(0,Z.jsxs)(r.Z,{elevation:3,sx:{padding:2},children:[0===S.length?(0,Z.jsxs)(s.Z,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:[(0,Z.jsx)(l.Z,{variant:"h6",color:"text.secondary",sx:{marginBottom:2},children:"No wallets added. Please add a wallet to proceed."}),(0,Z.jsx)(o.Z,{variant:"contained",color:"primary",onClick:z,children:"Add Wallet"})]}):(0,Z.jsxs)("form",{onSubmit:t=>{var i;t.preventDefault();const n={username:e,withdrawAmount:a,gateway:(null===(i=S.find((e=>e._id===C)))||void 0===i?void 0:i.gateway)||"",accountNumber:T,accountTitle:E};D(n),I(!0)},children:[(0,Z.jsx)(c.Z,{required:!0,fullWidth:!0,id:"withdrawAmount",label:"Withdraw Amount",type:"number",value:a,onChange:e=>k(e.target.value),margin:"normal",variant:"outlined"}),(0,Z.jsxs)(d.Z,{fullWidth:!0,margin:"normal",variant:"outlined",children:[(0,Z.jsx)(u.Z,{id:"wallet-label",children:"Select Wallet"}),(0,Z.jsx)(h.Z,{labelId:"wallet-label",id:"wallet",value:C,onChange:e=>{const t=e.target.value,a=S.find((e=>e._id===t));W(t),q(a?a.accountNumber:""),_(a?a.accountTitle:"")},label:"Select Wallet",children:S.map((e=>(0,Z.jsx)(x.Z,{value:e._id,children:e.gateway},e._id)))})]}),(0,Z.jsx)(c.Z,{required:!0,fullWidth:!0,id:"accountNumber",label:"Account Number",value:T,margin:"normal",variant:"outlined",disabled:!0}),(0,Z.jsx)(c.Z,{required:!0,fullWidth:!0,id:"accountTitle",label:"Account Title",value:E,margin:"normal",variant:"outlined",disabled:!0}),(0,Z.jsxs)(s.Z,{display:"flex",justifyContent:"center",sx:{marginTop:2},children:[(0,Z.jsx)(o.Z,{type:"submit",variant:"contained",color:"primary",disabled:!a||!C,children:"Submit Withdraw Request"}),(0,Z.jsx)(o.Z,{variant:"outlined",onClick:z,sx:{marginLeft:2},children:"Add More Wallet"})]})]}),B&&(0,Z.jsx)(l.Z,{variant:"h6",color:"error.main",sx:{marginTop:2,textAlign:"center"},children:B})]})}),(0,Z.jsxs)(m.Z,{open:P,onClose:$,children:[(0,Z.jsx)(g.Z,{children:"Confirm Withdrawal"}),(0,Z.jsx)(w.Z,{children:M?(0,Z.jsxs)(f.E.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.5},style:{textAlign:"center",marginTop:20},children:[(0,Z.jsx)("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"70px",height:"70px",borderRadius:"50%",margin:"0 auto"},children:(0,Z.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"#13E880",width:"64px",height:"64px",children:[(0,Z.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"#13E880",strokeWidth:"2"}),(0,Z.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2l4-4"})]})}),(0,Z.jsx)(l.Z,{variant:"h6",color:"success.main",sx:{marginTop:2},children:"Your withdrawal request has been submitted and is waiting for approval."})]}):(0,Z.jsxs)(p.Z,{children:["Are you sure you want to withdraw ",a," using the selected wallet? This action cannot be undone."]})}),(0,Z.jsxs)(j.Z,{children:[(0,Z.jsx)(o.Z,{onClick:$,color:"primary",disabled:M,children:"Cancel"}),(0,Z.jsx)(o.Z,{onClick:M?$:async()=>{try{const e=localStorage.getItem("token"),t=await v.Z.post("http://localhost:8001/api/withdraw-balance",L,{headers:{Authorization:`Bearer ${e}`}});console.log("Withdrawal request submitted:",t.data),k(""),W(""),q(""),_(""),R(!0)}catch(e){console.error("Error submitting withdrawal request:",e),N("Error submitting form. Please try again."),I(!1)}},color:"primary",children:M?"Close":"Confirm"})]})]})]})}}}]);
//# sourceMappingURL=426.d3c1e745.chunk.js.map
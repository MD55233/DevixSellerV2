"use strict";(self.webpackChunklaikostar_seller=self.webpackChunklaikostar_seller||[]).push([[426],{426:function(e,t,a){a.r(t);var l=a(2791),n=a(1889),i=a(7621),r=a(9504),s=a(890),o=a(5527),c=a(4554),d=a(4294),h=a(8096),u=a(4925),x=a(7198),m=a(3786),w=a(7391),j=a(5289),g=a(5661),p=a(9157),Z=a(1691),v=a(7123),y=a(1527),b=a(2903),f=a(5488),W=a(1140),k=a(184);t.default=()=>{const{username:e}=(0,y.a)(),t=(0,f.s0)(),[a,C]=(0,l.useState)(""),[A,S]=(0,l.useState)(""),[T,P]=(0,l.useState)([]),[E,q]=(0,l.useState)(""),[B,_]=(0,l.useState)(""),[I,M]=(0,l.useState)(""),[N,L]=(0,l.useState)(!1),[D,R]=(0,l.useState)(null),[U,$]=(0,l.useState)(!1),[z,F]=(0,l.useState)(!0);(0,l.useEffect)((()=>{(async()=>{try{const t=await b.Z.get(`http://localhost:8001/api/user-accounts/${e}`);P(t.data)}catch(t){console.error("Error fetching wallets:",t)}})(),(async()=>{try{const e=await b.Z.get("http://localhost:8001/api/settings/withdrawal-status");F(e.data.withdrawalEnabled)}catch(e){console.error("Error fetching withdrawal status:",e)}})()}),[e]);const Y=()=>{L(!1)},G=()=>{t("/wallet/add")};return(0,k.jsxs)(n.ZP,{container:!0,spacing:3,justifyContent:"center",children:[(0,k.jsx)(n.ZP,{item:!0,xs:12,children:(0,k.jsx)(i.Z,{sx:{backgroundColor:z?"#13E880":"#F44336",color:"white"},children:(0,k.jsxs)(r.Z,{children:[(0,k.jsx)(s.Z,{variant:"h6",sx:{fontWeight:"bold"},children:"Withdrawals are allowed only from Monday to Thursday, between 10:00 AM and 5:00 PM."}),(0,k.jsx)(s.Z,{variant:"body1",children:z?"Withdrawals.":"Withdrawals are currently disabled. "})]})})}),(0,k.jsx)(n.ZP,{item:!0,xs:12,children:(0,k.jsx)(s.Z,{variant:"h3",gutterBottom:!0,sx:{color:"secondary.main",textAlign:"center"},children:"Withdraw Balance"})}),(0,k.jsx)(n.ZP,{item:!0,xs:12,sm:6,children:(0,k.jsxs)(o.Z,{elevation:3,sx:{padding:2},children:[0===T.length?(0,k.jsxs)(c.Z,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:[(0,k.jsx)(s.Z,{variant:"h6",color:"text.secondary",sx:{marginBottom:2},children:"No wallets added. Please add a wallet to proceed."}),(0,k.jsx)(d.Z,{variant:"contained",color:"primary",onClick:G,children:"Add Wallet"})]}):(0,k.jsxs)("form",{onSubmit:t=>{var l;t.preventDefault();const n={username:e,withdrawAmount:a,gateway:(null===(l=T.find((e=>e._id===A)))||void 0===l?void 0:l.gateway)||"",accountNumber:E,accountTitle:B};R(n),L(!0)},children:[(0,k.jsxs)(h.Z,{fullWidth:!0,margin:"normal",variant:"outlined",children:[(0,k.jsx)(u.Z,{id:"withdraw-amount-label",children:"Withdraw Amount"}),(0,k.jsxs)(x.Z,{labelId:"withdraw-amount-label",id:"withdrawAmount",value:a,onChange:e=>C(e.target.value),label:"Withdraw Amount",children:[(0,k.jsx)(m.Z,{value:750,children:"750"}),(0,k.jsx)(m.Z,{value:1100,children:"1100"}),(0,k.jsx)(m.Z,{value:5e3,children:"5000"}),(0,k.jsx)(m.Z,{value:17500,children:"17500"}),(0,k.jsx)(m.Z,{value:5e4,children:"50000"}),(0,k.jsx)(m.Z,{value:11e4,children:"110000"})]})]}),(0,k.jsxs)(h.Z,{fullWidth:!0,margin:"normal",variant:"outlined",children:[(0,k.jsx)(u.Z,{id:"wallet-label",children:"Select Wallet"}),(0,k.jsx)(x.Z,{labelId:"wallet-label",id:"wallet",value:A,onChange:e=>{const t=e.target.value,a=T.find((e=>e._id===t));S(t),q(a?a.accountNumber:""),_(a?a.accountTitle:"")},label:"Select Wallet",children:T.map((e=>(0,k.jsx)(m.Z,{value:e._id,children:e.gateway},e._id)))})]}),(0,k.jsx)(w.Z,{required:!0,fullWidth:!0,id:"accountNumber",label:"Account Number",value:E,margin:"normal",variant:"outlined",disabled:!0}),(0,k.jsx)(w.Z,{required:!0,fullWidth:!0,id:"accountTitle",label:"Account Title",value:B,margin:"normal",variant:"outlined",disabled:!0}),(0,k.jsxs)(c.Z,{display:"flex",justifyContent:"center",sx:{marginTop:2},children:[(0,k.jsx)(d.Z,{type:"submit",variant:"contained",color:"primary",disabled:!a||!A,children:"Submit Withdraw Request"}),(0,k.jsx)(d.Z,{variant:"outlined",onClick:G,sx:{marginLeft:2},children:"Add More Wallet"})]})]}),I&&(0,k.jsx)(s.Z,{variant:"h6",color:"error.main",sx:{marginTop:2,textAlign:"center"},children:I})]})}),(0,k.jsxs)(j.Z,{open:N,onClose:Y,children:[(0,k.jsx)(g.Z,{children:"Confirm Withdrawal"}),(0,k.jsx)(p.Z,{children:U?(0,k.jsxs)(W.E.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.5},style:{textAlign:"center",marginTop:20},children:[(0,k.jsx)("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"70px",height:"70px",borderRadius:"50%",margin:"0 auto"},children:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"#13E880",width:"64px",height:"64px",children:[(0,k.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"#13E880",strokeWidth:"2"}),(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2l4-4"})]})}),(0,k.jsx)(s.Z,{variant:"h6",color:"success.main",sx:{marginTop:2},children:"Your withdrawal request has been submitted and is waiting for approval."})]}):(0,k.jsxs)(Z.Z,{children:["Are you sure you want to withdraw ",a," using the selected wallet? This action cannot be undone."]})}),(0,k.jsxs)(v.Z,{children:[(0,k.jsx)(d.Z,{onClick:Y,color:"primary",disabled:U,children:"Cancel"}),(0,k.jsx)(d.Z,{onClick:U?Y:async()=>{try{const e=localStorage.getItem("token"),t=await b.Z.post("http://localhost:8001/api/withdraw-balance",D,{headers:{Authorization:`Bearer ${e}`}});console.log("Withdrawal request submitted:",t.data),C(""),S(""),q(""),_(""),$(!0)}catch(e){if(e.response){const{status:t,data:a}=e.response;M(400===t?a.message||"Bad request. Please check your input.":403===t?a.message||"Withdrawals are not allowed at this time.":404===t?a.message||"User not found.":"An unexpected error occurred. Please try again.")}else M("Unable to connect to the server. Please check your internet connection.");L(!1)}},color:"primary",children:U?"Close":"Confirm"})]})]})]})}}}]);
//# sourceMappingURL=426.d5011b66.chunk.js.map
"use strict";(self.webpackChunklaikostar_seller=self.webpackChunklaikostar_seller||[]).push([[103],{8103:function(t,a,e){e.r(a);var r=e(2791),s=e(1889),n=e(890),o=e(3239),c=e(9281),i=e(5527),l=e(9836),d=e(6890),p=e(5855),h=e(3994),u=e(3382),m=e(4554),Z=e(2903),j=e(1527),x=e(184);a.default=()=>{const{username:t}=(0,j.a)(),[a,e]=(0,r.useState)([]),[g,f]=(0,r.useState)(!0),[y,k]=(0,r.useState)("");(0,r.useEffect)((()=>{(async()=>{try{const[a,r,s,n,o,c,i,l,d]=await Promise.all([Z.Z.get(`http://localhost:8001/api/transaction-history/${t}`),Z.Z.get(`http://localhost:8001/api/withdrawals/${t}`),Z.Z.get(`http://localhost:8001/api/training-bonus/${t}`),Z.Z.get(`http://localhost:8001/api/approvals/approve/${t}`),Z.Z.get(`http://localhost:8001/api/approvals/reject/${t}`),Z.Z.get(`http://localhost:8001/api/referral-payment/${t}`),Z.Z.get(`http://localhost:8001/api/approvals/referral/approve/${t}`),Z.Z.get(`http://localhost:8001/api/approvals/referral/reject/${t}`),Z.Z.get(`http://localhost:8001/api/task-transactions/${t}`)]),p=[...a.data.map((t=>({...t,type:"Creadit"}))),...r.data.map((t=>({...t,type:"Withdrawal"}))),...s.data.map((t=>({...t,type:"Pending Training Bonus",status:"pending"}))),...n.data.map((t=>({...t,type:"Approved Training Bonus",status:"approved"}))),...o.data.map((t=>({...t,type:"Rejected Training Bonus",status:"rejected"}))),...c.data.map((t=>({...t,type:"Referral Payment Verification",status:t.status,amount:t.transactionAmount,accountNumber:"-",gateway:t.gateway,remarks:"Referral payment verification submitted"}))),...i.data.map((t=>({...t,type:"Approved Referral Payment",amount:t.transactionAmount,status:"approved",remarks:"Approved"}))),...l.data.map((t=>({...t,type:"Rejected Referral Payment",status:"rejected",remarks:t.feedback||"No feedback provided"}))),...d.data.map((t=>({...t,type:"Task Transaction",status:t.status,amount:t.amount,taskName:t.taskId.name,accountNumber:"-",gateway:"-",remarks:t.description})))];p.sort(((t,a)=>new Date(a.createdAt)-new Date(t.createdAt))),e(p),f(!1)}catch(y){console.error("Error fetching transaction history:",y),k("Error fetching transaction history. Please try again."),f(!1)}})()}),[t]);const v=t=>{switch(t){case"approved":return{backgroundColor:"#d4edda",color:"#155724"};case"rejected":return{backgroundColor:"#f8d7da",color:"#721c24"};case"pending":return{backgroundColor:"#fff3cd",color:"#856404"};default:return{backgroundColor:"#ffffff",color:"#000000"}}};return(0,x.jsxs)(s.ZP,{container:!0,spacing:3,justifyContent:"center",children:[(0,x.jsx)(s.ZP,{item:!0,xs:12,children:(0,x.jsx)(n.Z,{variant:"h3",gutterBottom:!0,sx:{color:"secondary.main",textAlign:"center"},children:"Transaction History"})}),(0,x.jsx)(s.ZP,{item:!0,xs:12,sm:8,children:g?(0,x.jsx)(o.Z,{}):y?(0,x.jsx)(n.Z,{color:"error",variant:"h6",children:y}):0===a.length?(0,x.jsx)(n.Z,{variant:"h6",children:"No transactions found."}):(0,x.jsx)(c.Z,{component:i.Z,children:(0,x.jsxs)(l.Z,{children:[(0,x.jsx)(d.Z,{children:(0,x.jsxs)(p.Z,{children:[(0,x.jsx)(h.Z,{children:"Date"}),(0,x.jsx)(h.Z,{children:"Type"}),(0,x.jsx)(h.Z,{children:"Amount"}),(0,x.jsx)(h.Z,{children:"Status"}),(0,x.jsx)(h.Z,{children:"Account Number"}),(0,x.jsx)(h.Z,{children:"Gateway"}),(0,x.jsx)(h.Z,{children:"Remarks"})]})}),(0,x.jsx)(u.Z,{children:a.map((t=>(0,x.jsxs)(p.Z,{children:[(0,x.jsx)(h.Z,{children:new Date(t.createdAt).toLocaleDateString()}),(0,x.jsx)(h.Z,{children:t.type}),(0,x.jsxs)(h.Z,{children:["Rs ",t.amount]}),(0,x.jsx)(h.Z,{children:(0,x.jsx)(m.Z,{sx:{...v(t.status),padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:t.status})}),(0,x.jsx)(h.Z,{children:t.accountNumber||"-"}),(0,x.jsx)(h.Z,{children:t.gateway||"-"}),(0,x.jsx)(h.Z,{children:t.remarks||"-"})]},t._id)))})]})})})]})}}}]);
//# sourceMappingURL=103.f79477aa.chunk.js.map
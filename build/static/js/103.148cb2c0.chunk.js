"use strict";(self.webpackChunkfairyglow_seller=self.webpackChunkfairyglow_seller||[]).push([[103],{8103:function(e,t,a){a.r(t);var r=a(2791),n=a(1889),s=a(890),o=a(3239),c=a(9281),i=a(5527),l=a(9836),d=a(6890),p=a(5855),h=a(3994),u=a(3382),j=a(4554),x=a(2903),Z=a(1527),f=a(184);t.default=()=>{const{username:e}=(0,Z.a)(),[t,a]=(0,r.useState)([]),[m,g]=(0,r.useState)(!0),[y,v]=(0,r.useState)("");(0,r.useEffect)((()=>{(async()=>{try{const[t,r,n,s,o,c,i]=await Promise.all([x.Z.get(`http://localhost:8001/api/withdrawals/${e}`),x.Z.get(`http://localhost:8001/api/training-bonus/${e}`),x.Z.get(`http://localhost:8001/api/approvals/approve/${e}`),x.Z.get(`http://localhost:8001/api/approvals/reject/${e}`),x.Z.get(`http://localhost:8001/api/referral-payment/${e}`),x.Z.get(`http://localhost:8001/api/approvals/referral/approve/${e}`),x.Z.get(`http://localhost:8001/api/approvals/referral/reject/${e}`)]),l=[...t.data.map((e=>({...e,type:"Withdrawal"}))),...r.data.map((e=>({...e,type:"Pending Training Bonus",status:"pending"}))),...n.data.map((e=>({...e,type:"Approved Training Bonus",status:"approved"}))),...s.data.map((e=>({...e,type:"Rejected Training Bonus",status:"rejected"}))),...o.data.map((e=>({...e,type:"Referral Payment Verification",status:e.status,amount:e.transactionAmount,accountNumber:"-",gateway:e.gateway,remarks:"Referral payment verification submitted"}))),...c.data.map((e=>({...e,type:"Approved Referral Payment",status:"approved"}))),...i.data.map((e=>({...e,type:"Rejected Referral Payment",status:"rejected",remarks:e.feedback||"No feedback provided"})))];l.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))),a(l),g(!1)}catch(y){console.error("Error fetching transaction history:",y),v("Error fetching transaction history. Please try again."),g(!1)}})()}),[e]);const w=e=>{switch(e){case"approved":return{backgroundColor:"#d4edda",color:"#155724"};case"rejected":return{backgroundColor:"#f8d7da",color:"#721c24"};case"pending":return{backgroundColor:"#fff3cd",color:"#856404"};default:return{backgroundColor:"#ffffff",color:"#000000"}}};return(0,f.jsxs)(n.ZP,{container:!0,spacing:3,justifyContent:"center",children:[(0,f.jsx)(n.ZP,{item:!0,xs:12,children:(0,f.jsx)(s.Z,{variant:"h3",gutterBottom:!0,sx:{color:"secondary.main",textAlign:"center"},children:"Transaction History"})}),(0,f.jsx)(n.ZP,{item:!0,xs:12,sm:8,children:m?(0,f.jsx)(o.Z,{}):y?(0,f.jsx)(s.Z,{color:"error",variant:"h6",children:y}):0===t.length?(0,f.jsx)(s.Z,{variant:"h6",children:"No transactions found."}):(0,f.jsx)(c.Z,{component:i.Z,children:(0,f.jsxs)(l.Z,{children:[(0,f.jsx)(d.Z,{children:(0,f.jsxs)(p.Z,{children:[(0,f.jsx)(h.Z,{children:"Date"}),(0,f.jsx)(h.Z,{children:"Type"}),(0,f.jsx)(h.Z,{children:"Amount"}),(0,f.jsx)(h.Z,{children:"Status"}),(0,f.jsx)(h.Z,{children:"Account Number"}),(0,f.jsx)(h.Z,{children:"Gateway"}),(0,f.jsx)(h.Z,{children:"Remarks"})]})}),(0,f.jsx)(u.Z,{children:t.map((e=>(0,f.jsxs)(p.Z,{children:[(0,f.jsx)(h.Z,{children:new Date(e.createdAt).toLocaleDateString()}),(0,f.jsx)(h.Z,{children:e.type}),(0,f.jsxs)(h.Z,{children:["Rs,",e.transactionAmount||e.amount]}),(0,f.jsx)(h.Z,{children:(0,f.jsx)(j.Z,{sx:{...w(e.status),padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:e.status})}),(0,f.jsx)(h.Z,{children:e.accountNumber||"-"}),(0,f.jsx)(h.Z,{children:e.gateway||"-"}),(0,f.jsx)(h.Z,{children:e.remarks||"-"})]},e._id)))})]})})})]})}}}]);
//# sourceMappingURL=103.148cb2c0.chunk.js.map